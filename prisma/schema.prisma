generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Tutor {
  id        String    @id @default(cuid())
  createdAt DateTime  @default(now())
  updatedAt DateTime  @default(now())
  firstName String
  lastName  String
  email     String    @unique
  bio       String?
  avatar    String?
  subjects  Subject[]
  courses   Course[]
}

model Subject {
  id            String    @id @default(cuid())
  tutorId       String?
  topic         String?
  title         String
  description   String
  color         String
  tutor         Tutor?    @relation(fields: [tutorId], references: [id])
  courses       Course[]
  sessions      Session[]
  materialRoute String?
}

model Course {
  id               String    @id @default(cuid())
  title            String
  description      String
  startsAt         DateTime
  endsAt           DateTime
  inscriptionStart DateTime
  inscriptionEnd   DateTime
  tutorId          String?
  price            Int
  duration         Int
  subjects         Subject[]
  tutor            Tutor?     @relation(fields: [tutorId], references: [id])
  groups           Group[]
}

model Group {
  id          String    @id @default(cuid())
  title       String
  description String
  courseId    String
  course      Course    @relation(fields: [courseId], references: [id])
  sessions    Session[] // one group â†’ many sessions
}

model Session {
  id          String   @id @default(cuid())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @default(now())
  title       String
  description String
  price       Int
  duration    Int
  date        DateTime
  capacity    Int
  groupId     String
  subjectId   String

  group       Group         @relation(fields: [groupId], references: [id])
  subject     Subject       @relation(fields: [subjectId], references: [id])
  reservation Reservation[]
}

model Reservation {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  sessionId String
  studentId String?
  session   Session  @relation(fields: [sessionId], references: [id])
}

model Post {
  id          String   @id @default(cuid())
  createdAt   DateTime @default(now())
  route       String
  title       String
  description String
  topic       String?
}

model Folder {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  route     String
  name      String
}
